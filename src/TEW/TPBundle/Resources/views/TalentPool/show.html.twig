{# TEW/TPBundle/src/Resources/views/TalentPool/show.html.twig #}
{% extends '::base.html.twig' %}

{% block scripts %}
    <script>
    $(function () {
        $('[data-toggle="popover"]').popover({ // Contain the popover within the body NOT the element it was called in.
            container: 'body'
        });
    });
    </script>
{% endblock %}
{% block body -%}
    <h1>TalentPool</h1>

    <table class="record_properties">
        <tbody>
            {% if entity.picture is not null%}
            <tr>
                <td colspan='2'><img src="{% path entity.picture, 'admin' %}" alt="{{ entity.picture.name }}"></td>
            </tr>
            {% endif %}
            {% if is_granted("ROLE_TEW_EXECUTOR") %}
            <tr>
                <th>Owner</th>
                <td>{{ entity.creator }}</td>
            </tr>
            {% endif %}
            <tr>
                <th>Name</th>
                <td>{{ entity.name }}</td>
            </tr>
            <tr>
                <th>Description</th>
                <td>{{ entity.description|raw }}</td>
            </tr>
            {% if is_granted("ROLE_TEW_EXECUTOR") %}
            <tr>
                <th>Clients</th>
                <td>{{ entity.companies|join(' / ') }}</td>
            </tr>
            {% endif %}
            <tr>
                <th>Profiles</th>
                <td>
                    {% for profile in entity.profiles %}
                        {% set datacontent = '<h5>Position</h5>' ~ profile.function.indentedName ~ ' ' ~ profile.level %}
                        {% if profile.locations|length >0 %}
                            {% set datacontent = datacontent ~ '<h5>Location(s)</h5>' ~ profile.locations|join(' / ') %}
                        {% endif %}
                        {% set datacontent = datacontent ~ '<h5>Description</h5>' ~ profile.description %}
                        <div data-toggle="popover" data-delay='{ "show": 500, "hide": 200 }' data-html="true" style="cursor:help" data-trigger='hover'
                             data-content="{{ datacontent }}" data-title="{{ profile }}">
                            {{ profile }}
                        </div>
                    {% endfor %}
                </td>
            </tr>
            <tr>
                <th>Candidates (to be removed)</th>
                <td>{{ entity.candidates|join(' / ') }}</td>
            </tr>
            {% if is_granted("ROLE_TEW_EXECUTOR") %}
            <tr>
                <th>Creationdate</th>
                <td>{{ entity.createdAt|date('d M Y H:i:s') }}</td>
            </tr>
            {% endif %}
        </tbody>
    </table>
{% block actions %}
    <div class="btn-toolbar pull-right record_actions" role="group">
        <div class="btn-group">
            <a role="button"  class="btn btn-info" href="{{ path('tew_talentpool') }}">
                Back to the list
            </a>
        </div>
        {% if is_granted("ROLE_TEW_EXECUTOR") %}
        <div class="btn-group">
            <a role="button" class="btn btn-warning" href="{{ path('tew_talentpool_edit', { 'id': entity.id }) }}" >
                Edit
            </a>
        </div>
        <div class="btn-group">
            {{ form(delete_form) }}
        </div>
        {% endif %}
    </div>
{% endblock actions %}
{% endblock %}
